import{_ as Y,s as Z,i as ee,u as te,B as oe,v as $,r as y,C as B,D as se,a as i,b as ae,o as x,f as g,e as ne,g as e,x as le,d as n,w as l,F as j,A as C,G as w,j as c,h as f,H as de,I as M,l as re,n as ie,t as d,J as ce,m as pe,q as _e}from"./index.c95de30c.js";const r=v=>(pe("data-v-b9f484fd"),v=v(),_e(),v),ue={class:"py-6 border-b-2 border-solid","element-loading-text":"\u6B63\u5728\u63D0\u4EA4\u8BA2\u5355"},xe={class:"base-width m-auto flex flex-row items-center"},ge=r(()=>e("div",{class:"flex-1 flex flex-row items-baseline"},[e("div",{class:"text-[22px] ml-[22px]"},"\u786E\u8BA4\u8BA2\u5355")],-1)),fe={class:"el-dropdown-link text-primaryColor font-bold"},me={class:"bg-gray-100 overflow-auto"},he={class:"base-width m-auto mt-[22px] p-[20px] bg-white"},ye=r(()=>e("h2",{class:"text-gray-700 text-[18px] my-[6px]"},"\u6536\u8D27\u5730\u5740",-1)),Ce={class:"address-list"},ve=["onClick"],be={class:"text-[18px]"},Ie={class:"text-gray-600 text-[14px]"},we={class:"address-all text-gray-600 text-[14px]"},ke={class:"flex flex-row justify-center items-center border border-solid border-gray-400 p-6 box-border leading-7"},Le=r(()=>e("h2",{class:"text-gray-700 text-[18px] mt-[20px] my-[6px]"},"\u5546\u54C1\u53CA\u4F18\u60E0\u5377",-1)),De={class:"text-[12px]"},Oe={class:"text-primaryColor"},Ae=r(()=>e("div",{class:"flex flex-row h-[80px] items-center border-b border-solid border-gray-200"},[e("h2",{class:"text-gray-700 text-[18px] my-[10px]"},"\u914D\u9001\u65B9\u5F0F"),e("span",{class:"text-primaryColor ml-10 text-[14px]"},"\u5305\u90AE")],-1)),Se=r(()=>e("div",{class:"flex flex-row h-[80px] items-center border-b border-solid border-gray-200"},[e("h2",{class:"text-gray-700 text-[18px] my-[10px]"},"\u53D1\u7968"),e("span",{class:"text-primaryColor ml-10 text-[14px]"},"\u7535\u5B50\u666E\u901A\u53D1\u7968\u4E2A\u4EBA\u5546\u54C1\u660E\u7EC6\u4FEE\u6539 >")],-1)),$e={class:"total-info-ul"},Be=r(()=>e("span",null,"\u5546\u54C1\u603B\u4EF6\u6570\uFF1A",-1)),je={class:"text-primaryColor"},Me=r(()=>e("span",null,"\u5546\u54C1\u603B\u4EF7\uFF1A",-1)),Ne={class:"text-primaryColor"},Pe=r(()=>e("li",null,[e("span",null,"\u6D3B\u52A8\u4F18\u60E0\uFF1A"),e("span",{class:"text-primaryColor"},"-0\u5143")],-1)),Ee=r(()=>e("li",null,[e("span",null,"\u4F18\u60E0\u5238\u62B5\u6263\uFF1A"),e("span",{class:"text-primaryColor"},"-0\u5143")],-1)),Ge=r(()=>e("li",null,[e("span",null,"\u8FD0\u8D39\uFF1A"),e("span",{class:"text-primaryColor"},"0\u5143")],-1)),Te={class:"flex flex-row items-end"},Re=r(()=>e("span",null,"\u5E94\u4ED8\u603B\u989D\uFF1A",-1)),Ve={class:"text-primaryColor text-[28px]"},qe={class:"flex flex-row justify-end mt-[20px] box-border"},Fe={__name:"CheckoutOrder",setup(v){const N=Z(),P=ee("baseURL"),u=te(),E=oe(),p=$({pageIndex:1}),a=$({listData:[],pageCount:0,pageIndex:1,totalCount:0}),_=y(!1),G=o=>{_.value=!0,C.addressInfo.getMyAddressInfoList(p.pageIndex).then(t=>{console.log(t),a.listData=t.listData,a.pageCount=t.pageCount,a.pageIndex=t.pageIndex,a.totalCount=t.totalCount}).finally(()=>{_.value=!1})},T=()=>{a.pageIndex<a.pageCount&&(p.pageIndex++,_.value=!0,C.addressInfo.getMyAddressInfoList(p.pageIndex).then(o=>{a.listData=o.listData,a.pageCount=o.pageCount,a.pageIndex=o.pageIndex,a.totalCount=o.totalCount}).finally(()=>{_.value=!1}))},R=()=>{a.pageIndex<=a.pageCount&&(p.pageIndex--,p.pageIndex<1?p.pageIndex=1:(_.value=!0,C.addressInfo.getMyAddressInfoList(p.pageIndex).then(o=>{a.listData=o.listData,a.pageCount=o.pageCount,a.pageIndex=o.pageIndex,a.totalCount=o.totalCount}).finally(()=>{_.value=!1})))},k=y(!1),m=y([]),V=()=>{k.value=!0;let o=E.params.Ids;C.shopCarInfo.getMyCheckoutShopCarList(o).then(t=>{console.log(t),t.forEach(I=>{I.goodsInfo.goods_photo=JSON.parse(I.goodsInfo.goods_photo)}),m.value=t}).catch(()=>{w.alert("\u83B7\u53D6\u786E\u8BA4\u8BA2\u5355\u7684\u5546\u54C1\u6570\u636E\u5931\u8D25")}).finally(t=>{k.value=!1})},q=B(()=>{let o=0;return m.value.forEach(t=>{o+=t.car_goods_num}),o}),O=B(()=>{let o=0;return m.value.forEach(t=>{o+=t.car_goods_num*t.goodsInfo.goods_sale_price}),o}),b=y(-1),L=y(!1),F=()=>{if(b.value===-1){w.alert("\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740","\u63D0\u793A");return}L.value=!0;let o={address_id:a.listData[b.value].id,order_pay_type:1,goodsList:m.value.map(t=>({goods_id:t.goods_id,goods_num:t.car_goods_num}))};C.orderInfo.submitOrder(o).then(t=>{u.replace({name:"ConfirmOrder",params:{id:t}})}).catch(()=>{w.alert("\u63D0\u4EA4\u8BA2\u5355\u5931\u8D25","\u63D0\u793A",{type:"error"})}).finally(()=>{L.value=!1})},H=o=>{o==="customCenter"?u.push({name:"customInfo"}):o==="logOut"&&J()},J=()=>{w.confirm("\u786E\u5B9A\u8981\u9000\u51FA\u5417","\u7CFB\u7EDF\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A\u9000\u51FA",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{N.logOut(),u.replace({name:"Login"})})};return se(()=>{G(p.pageIndex),V()}),(o,t)=>{const I=i("el-icon"),D=i("el-dropdown-item"),U=i("el-dropdown-menu"),z=i("el-dropdown"),K=i("el-button"),A=i("el-skeleton"),h=i("el-table-column"),Q=i("el-image"),W=i("el-table"),X=ae("loading");return x(),g(j,null,[ne((x(),g("div",ue,[e("div",xe,[e("img",{src:le,class:"w-[56px] h-[56px] cursor-pointer",onClick:t[0]||(t[0]=s=>o.$router.replace({name:"Index"})),alt:""}),ge,e("div",null,[n(z,{onCommand:H},{dropdown:l(()=>[n(U,null,{default:l(()=>[n(D,{command:"CustomInfo",onClick:t[1]||(t[1]=s=>c(u).replace({name:"CustomInfo"}))},{default:l(()=>[f(" \u4EBA\u4E2A\u4E2D\u5FC3")]),_:1}),n(D,{command:"CustomCenter",onClick:t[2]||(t[2]=s=>c(u).replace({name:"OrderInfoList"}))},{default:l(()=>[f(" \u6211\u7684\u8BA2\u5355")]),_:1}),n(D,{divided:"",command:"logOut"},{default:l(()=>[f("\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:l(()=>[e("span",fe,[f(" H2204 "),n(I,{class:"text-primaryColor"},{default:l(()=>[n(c(de))]),_:1})])]),_:1})])])])),[[X,L.value]]),e("div",me,[e("div",he,[ye,n(A,{animated:"",loading:_.value},{default:l(()=>[a.pageIndex>1?(x(),g("div",{key:0,class:"flex flex-row h-[40px] justify-center items-center my-5 bg-gray-100 cursor-pointer text-gray-500",onClick:R}," \u52A0\u8F7D\u4E0A\u4E00\u9875 ")):M("",!0),e("div",Ce,[(x(!0),g(j,null,re(a.listData,(s,S)=>(x(),g("div",{class:ie(["address-item p-[20px]",{selected:b.value===S}]),onClick:He=>b.value=S,key:s.id},[e("div",be,d(s.address_name),1),e("p",Ie,d(s.address_tel.substr(0,3)+"****"+s.address_tel.slice(-4)),1),e("p",we,d(s.province)+" "+d(s.city)+" "+d(s.area)+" "+d(s.address_detail),1)],10,ve))),128)),e("div",ke,[n(K,{icon:c(ce),type:"text",onClick:t[3]||(t[3]=s=>c(u).replace({name:"AddressList"}))},{default:l(()=>[f(" \u65B0\u589E\u5730\u5740 ")]),_:1},8,["icon"])])]),a.pageIndex<a.pageCount?(x(),g("div",{key:1,class:"flex flex-row h-[40px] justify-center items-center my-5 bg-gray-100 cursor-pointer text-gray-500",onClick:T}," \u52A0\u8F7D\u4E0B\u4E00\u9875 ")):M("",!0)]),_:1},8,["loading"]),n(A,{animated:"",loading:k.value},{default:l(()=>[Le,n(W,{data:m.value,class:"w-full"},{default:l(()=>[n(h,{label:"\u7F16\u53F7",width:"70",align:"center"},{default:l(({$index:s})=>[f(d(s+1),1)]),_:1}),n(h,{label:"\u56FE\u7247",width:"120",align:"center"},{default:l(({row:s})=>[n(Q,{src:c(P)+s.goodsInfo.goods_photo[0],class:"w-[60px] h-[60px]"},null,8,["src"])]),_:1}),n(h,{prop:"goodsInfo.goods_name",label:"\u5546\u54C1\u540D\u79F0"}),n(h,{label:"\u4EF7\u683C\u6570\u91CF",width:"200",align:"center"},{default:l(({row:s})=>[e("span",De,d(s.goodsInfo.goods_sale_price)+"\u5143 x "+d(s.car_goods_num),1)]),_:1}),n(h,{label:"\u603B\u4EF7",width:"120"},{default:l(({row:s})=>[e("span",Oe,d(s.goodsInfo.goods_sale_price*s.car_goods_num),1)]),_:1})]),_:1},8,["data"]),Ae,Se,e("ul",$e,[e("li",null,[Be,e("span",je,d(c(q))+"\u4EF6",1)]),e("li",null,[Me,e("span",Ne,d(c(O))+"\u5143",1)]),Pe,Ee,Ge,e("li",Te,[Re,e("span",Ve,d(c(O))+"\u5143",1)])]),e("div",qe,[e("button",{type:"button",class:"w-[180px] h-[40px] border border-solid border-gray-400 text-gray-400",onClick:t[4]||(t[4]=s=>o.$router.back())},"\u8FD4\u56DE\u8D2D\u7269\u8F66 "),e("button",{type:"button",class:"w-[160px] h-[40px] bg-[#ff6700] text-white ml-10",onClick:F},"\u53BB\u7ED3\u7B97 ")])]),_:1},8,["loading"])])])],64)}}},Ue=Y(Fe,[["__scopeId","data-v-b9f484fd"]]);export{Ue as default};
