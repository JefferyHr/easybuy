import{r as V,v as w,D as z,a as d,o as P,c as G,w as s,A as v,d as e,g as x,h as p,t as c,j as H,z as m}from"./index.c95de30c.js";import{a as n}from"./app.e73123e2.js";const J={class:"flex flex-row justify-between"},K=x("span",null,"\u6211\u7684\u6536\u8D27\u5730\u5740",-1),O={class:"flex flex-row justify-between items-center pt-[11px]"},Q={class:"text-[14px]"},Z={__name:"AddressList",setup(R){const f=V(!1),I=n.exports.regionData,b=w({pageIndex:1}),r=w({listData:[],pageCount:0,totalCount:0}),a=w({address_name:"",province:"",city:"",area:"",address_tag:"",address_tel:"",address:"",address_detail:""}),T={address_name:[{required:!0,message:"\u6536\u8D27\u4EBA\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],address_tel:[{required:!0,message:"\u8054\u7CFB\u7535\u8BDD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u683C\u5F0F",trigger:"blur"}],address:[{required:!0,message:"\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],address_detail:[{required:!0,message:"\u8BE6\u7EC6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},D=t=>{if(t[1]!=null&&t[2]!=null)var o=n.exports.CodeToText[t[0]]+" "+n.exports.CodeToText[t[1]]+" "+n.exports.CodeToText[t[2]];else t[1]!=null?o=n.exports.CodeToText[t[0]]+" "+n.exports.CodeToText[t[1]]:o=n.exports.CodeToText[t[0]];return o},C=()=>{v.addressInfo.getMyAddressInfoList(b.pageIndex).then(t=>{console.log(t),r.listData=t.listData,r.pageCount=t.pageCount,r.totalCount=t.totalCount})},k=t=>{b.pageIndex=t,C()},F=t=>{v.addressInfo.deleteById(t).then(o=>{m({type:"success",title:"\u5220\u9664\u6210\u529F",message:"\u5F53\u524D\u6536\u8D27\u5730\u5740\u5220\u9664\u6210\u529F"}),C()}).catch(o=>{m({type:"warning",title:"\u5220\u9664\u5931\u8D25",message:"\u5F53\u524D\u6536\u8D27\u5730\u5740\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u6216\u8054\u7CFB\u7BA1\u7406\u5458"})})},h=V(!1),$=()=>{h.value=!0,a.address=D(a.address),a.address=a.address.split(" "),a.province=a.address[0],a.city=a.address[1],a.area=a.address[2],v.addressInfo.addMyAddressInfo(a).then(t=>{console.log(t),m({type:"success",title:"\u63D0\u793A",message:"\u65B0\u589E\u5730\u5740\u6210\u529F"}),location.reload()}).catch(t=>{m({type:"warning",title:"\u5931\u8D25\u4E86",message:"\u65B0\u589E\u5730\u5740\u5931\u8D25"}),console.log(t)}).finally(()=>{h.value=!1,f.value=!1})},y=V(null),q=()=>{y.value.validate(t=>{t?$():m({type:"warning",title:"\u63D0\u793A",message:"\u8BF7\u6B63\u786E\u7684\u586B\u5199\u8868\u5355\u7684\u5185\u5BB9"})})},A=()=>{y.value.resetFields()};return z(()=>{C()}),(t,o)=>{const u=d("el-button"),_=d("el-table-column"),U=d("el-popconfirm"),B=d("el-table"),N=d("el-pagination"),j=d("el-card"),g=d("el-input"),i=d("el-form-item"),E=d("el-cascader"),M=d("el-form"),L=d("el-drawer"),S=d("page-view");return P(),G(S,{class:"p-[22px] pb-[120px]"},{default:s(()=>[e(j,null,{header:s(()=>[x("div",J,[K,e(u,{plain:"",color:"#ff6a00",onClick:o[0]||(o[0]=l=>f.value=!0)},{default:s(()=>[p("\u65B0\u589E\u5730\u5740")]),_:1})])]),default:s(()=>[e(B,{border:"",stripe:"",data:r.listData},{default:s(()=>[e(_,{label:"\u6536\u4EF6\u4EBA\u59D3\u540D",prop:"address_name",width:"200",align:"center"}),e(_,{label:"\u6536\u4EF6\u4EBA\u7535\u8BDD",prop:"address_tel",width:"200",align:"center"}),e(_,{label:"\u6536\u8D27\u5730\u5740",align:"center"},{default:s(({row:l})=>[p(c(`${l.province} ${l.city} ${l.area} ${l.address_detail}`),1)]),_:1}),e(_,{label:"\u5730\u5740\u6807\u7B7E",width:"150",align:"center"},{default:s(({row:l})=>[e(u,{type:"primary",plain:""},{default:s(()=>[p(c(l.address_tag),1)]),_:2},1024)]),_:1}),e(_,{label:"\u64CD\u4F5C",width:"150",align:"center"},{default:s(({row:l})=>[e(U,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:W=>F(l.id)},{reference:s(()=>[e(u,{type:"danger",size:"small"},{default:s(()=>[p("\u5220\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),x("div",O,[x("div",Q,"\u5F53\u524D\u7B2C"+c(b.pageIndex)+"\u9875\uFF0C\u5171"+c(r.pageCount)+"\u9875\uFF0C\u5171"+c(r.totalCount)+"\u6761",1),e(N,{background:"",layout:"prev, pager, next",total:r.totalCount,onCurrentChange:k},null,8,["total"])])]),_:1}),e(L,{modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=l=>f.value=l),"with-header":!1,size:"40%"},{default:s(()=>[e(M,{model:a,rules:T,"label-width":"80px",ref_key:"addressFormEl",ref:y},{default:s(()=>[e(i,{label:"\u59D3\u540D",prop:"address_name"},{default:s(()=>[e(g,{placeholder:"\u6536\u8D27\u4EBA\u59D3\u540D",modelValue:a.address_name,"onUpdate:modelValue":o[1]||(o[1]=l=>a.address_name=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"address_tel"},{default:s(()=>[e(g,{placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",modelValue:a.address_tel,"onUpdate:modelValue":o[2]||(o[2]=l=>a.address_tel=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u7528\u6237\u5730\u5740",prop:"address"},{default:s(()=>[e(E,{options:H(I),modelValue:a.address,"onUpdate:modelValue":o[3]||(o[3]=l=>a.address=l),style:{width:"100%"}},null,8,["options","modelValue"])]),_:1}),e(i,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"address_detail"},{default:s(()=>[e(g,{placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740",type:"textarea",rows:5,modelValue:a.address_detail,"onUpdate:modelValue":o[4]||(o[4]=l=>a.address_detail=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"\u6807\u7B7E",prop:"address_tag"},{default:s(()=>[e(g,{placeholder:"\u6807\u7B7E",modelValue:a.address_tag,"onUpdate:modelValue":o[5]||(o[5]=l=>a.address_tag=l)},null,8,["modelValue"])]),_:1}),e(i,null,{default:s(()=>[e(u,{color:"#ff6700",onClick:q},{default:s(()=>[p("\u4FDD\u5B58 ")]),_:1}),e(u,{onClick:A},{default:s(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}};export{Z as default};
